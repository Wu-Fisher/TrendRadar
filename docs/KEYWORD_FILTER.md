# 关键词过滤配置指南

本文档说明 `config/frequency_words.txt` 文件的配置方法。

---

## 目录

1. [文件结构](#文件结构)
2. [全局过滤词](#全局过滤词)
3. [关键词分组](#关键词分组)
4. [高级语法](#高级语法)
5. [配置示例](#配置示例)

---

## 文件结构

```
frequency_words.txt
├── [GLOBAL_FILTER]     # 全局过滤区
│   └── 过滤词...
│
└── [WORD_GROUPS]       # 关键词分组区
    ├── [分组名称1]
    │   └── 关键词...
    ├── [分组名称2]
    │   └── 关键词...
    └── ...
```

---

## 全局过滤词

在 `[GLOBAL_FILTER]` 区域定义的词会**排除匹配的新闻**。

```
[GLOBAL_FILTER]
# 任意内容匹配则直接排除
广告
推广
点击领取
免费试用
```

**逻辑**: 新闻标题/内容中包含任意过滤词 → 直接排除，不推送

**用途**: 过滤垃圾信息、广告、无关内容

---

## 关键词分组

在 `[WORD_GROUPS]` 区域定义关键词分组，**匹配的新闻会被标记并推送**。

```
[WORD_GROUPS]
# 分组名称用方括号包裹
[地缘政治/能源]
石油
伊朗
美国
中东

[科技/AI]
人工智能
ChatGPT
大模型
算力
```

### 匹配逻辑

```
新闻标题: "伊朗宣布扩大石油出口"

匹配过程:
  ✓ 匹配 "伊朗" → 标记: [地缘政治/能源]
  ✓ 匹配 "石油" → 标记: [地缘政治/能源]

输出:
  标题: 伊朗宣布扩大石油出口
  关键词: 伊朗, 石油
  分组: 地缘政治/能源
```

---

## 高级语法

### 1. 必须词 (`+`)

使用 `+` 前缀标记**必须同时出现**的词：

```
[半导体/芯片]
+芯片
+出口管制
# 只有同时包含"芯片"和"出口管制"的新闻才会被匹配
```

**示例**:
- "芯片价格上涨" → ✗ 不匹配（缺少"出口管制"）
- "美国加强芯片出口管制" → ✓ 匹配

### 2. 组内过滤词 (`!`)

使用 `!` 前缀标记**组内排除词**：

```
[新能源汽车]
新能源
电动车
充电桩
!玩具车
!模型车
# 匹配新能源相关，但排除玩具/模型类新闻
```

**示例**:
- "新能源汽车销量创新高" → ✓ 匹配
- "新能源玩具车热销" → ✗ 排除（含"玩具车"）

### 3. 数量限制 (`@`)

使用 `@数字` 限制每个分组的**最大推送条数**：

```
[热门股票]
茅台
宁德时代
比亚迪
@5
# 此分组每次最多推送 5 条新闻
```

### 4. 分组别名

方括号内的内容就是分组的显示名称，支持使用特殊字符：

```
[🔥 热点事件]
爆发
突发
重大

[📈 财经/股市]
A股
上证
深证
```

---

## 配置示例

### 完整配置文件

```
# ═══════════════════════════════════════════════════
# TrendRadar 关键词过滤配置
# ═══════════════════════════════════════════════════

# === 全局过滤词 ===
# 匹配以下词的新闻将被直接排除

[GLOBAL_FILTER]
广告
推广
点击领取
免费试用
独家优惠
扫码关注


# === 关键词分组 ===
# 匹配以下词的新闻将被标记并推送

[WORD_GROUPS]

# ─────────────────────────────
# 宏观经济
# ─────────────────────────────
[宏观经济/政策]
央行
降息
加息
MLF
LPR
GDP
CPI
PMI

# ─────────────────────────────
# 地缘政治
# ─────────────────────────────
[地缘政治/能源]
石油
原油
天然气
伊朗
俄罗斯
中东
OPEC

# ─────────────────────────────
# 科技行业
# ─────────────────────────────
[科技/AI]
人工智能
AI
ChatGPT
大模型
算力
英伟达
OpenAI

[科技/芯片]
芯片
半导体
光刻机
台积电
中芯国际

# ─────────────────────────────
# 新能源
# ─────────────────────────────
[新能源/汽车]
新能源
电动车
锂电池
宁德时代
比亚迪
特斯拉
充电桩
!玩具车

# ─────────────────────────────
# 房地产
# ─────────────────────────────
[房地产/楼市]
房价
楼市
房贷
限购
土拍
万科
恒大
碧桂园
@10
```

### 行业监控配置

```
[WORD_GROUPS]

# 医药行业全覆盖
[医药/创新药]
+创新药
+获批
# 必须同时出现"创新药"和"获批"

[医药/集采]
集采
带量采购
医保谈判

[医药/CXO]
CRO
CMO
CDMO
药明康德
康龙化成
```

### 投资主题配置

```
[WORD_GROUPS]

# 主题投资
[主题/低空经济]
低空经济
eVTOL
飞行汽车
空中出租车

[主题/人形机器人]
人形机器人
具身智能
特斯拉机器人
Optimus

[主题/卫星互联网]
卫星互联网
星链
低轨卫星
6G
```

---

## 注意事项

1. **注释**: 以 `#` 开头的行会被忽略
2. **空行**: 空行会被忽略，可用于分隔内容
3. **大小写**: 匹配时忽略大小写（"AI" 和 "ai" 视为相同）
4. **部分匹配**: 默认为部分匹配（"芯片"会匹配"芯片价格"）
5. **优先级**: 全局过滤词优先于关键词分组

---

## 配置生效

修改 `frequency_words.txt` 后：
- **Daemon 模式**: 下次轮询自动加载新配置
- **其他模式**: 需要重启容器

```bash
# 手动重启
docker compose restart trendradar
```

---

最后更新: 2026-02-02
