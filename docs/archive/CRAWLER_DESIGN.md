# TrendRadar çˆ¬è™«æ¨¡å—è®¾è®¡æ–‡æ¡£

> Version: 1.2.0
> Date: 2026-01-31
> Status: âœ… å·²å®ç°å¹¶é›†æˆ

## 1. éœ€æ±‚åˆ†æ

### 1.1 æ ¸å¿ƒéœ€æ±‚

| ç¼–å· | éœ€æ±‚ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|------|--------|------|
| R1 | å¯æ‰©å±•çˆ¬è™«æ¶æ„ | P0 | æ”¯æŒé€šè¿‡æ³¨å†Œæœºåˆ¶æ¥å…¥å¤šä¸ªæ–°é—»ç½‘ç«™ |
| R2 | 10ç§’è½®è¯¢é¢‘ç‡ | P0 | é»˜è®¤10ç§’ï¼Œå¯é…ç½® |
| R3 | å¼‚æ­¥å®Œæ•´å†…å®¹è·å– | P0 | å®æ—¶æ¨é€ï¼Œä¸ç­‰å¾…æ‰€æœ‰å†…å®¹è·å–å®Œæˆ |
| R4 | ä¸¥æ ¼å¼‚å¸¸å¤„ç† | P0 | æ‰€æœ‰è§£æ/ç½‘ç»œé”™è¯¯éœ€è®°å½•ï¼Œæ”¯æŒåç»­æ’æŸ¥ |
| R5 | è¿‡æ»¤æœºåˆ¶å¯¹æ¥ | P0 | æ”¯æŒæ ‡é¢˜ã€æ‘˜è¦ã€å®Œæ•´å†…å®¹çš„å…³é”®è¯è¿‡æ»¤ |
| R6 | å¢é‡æœºåˆ¶ä¿®å¤ | P0 | ä¸ä¾èµ–"è´¢è”ç¤¾çƒ­é—¨"æ¿å— |
| R7 | ç½‘é¡µæ˜¾ç¤ºæ”¹é€  | P1 | æœ€å¤§100æ¡å†å²ï¼Œæ˜¾ç¤ºå¢é‡æ ‡è®° |
| R8 | æ•°æ®åº“åˆ†ç¦»å­˜å‚¨ | P1 | è¿‡æ»¤å‰/è¿‡æ»¤ååˆ†å¼€å­˜å‚¨ |
| R9 | AIåˆ†ææ¥å£é¢„ç•™ | P2 | é¢„ç•™å¼‚æ­¥åˆ†æå’Œç»“æœå¡«å…… |

### 1.2 å½“å‰æ¶æ„åˆ†æ

```
ç°æœ‰æ¶æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RSS Fetcher â”‚â”€â”€â”€â”€â–¶â”‚ RSS Parser   â”‚â”€â”€â”€â”€â–¶â”‚ Storage     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Frequency    â”‚
                    â”‚ Filter       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—®é¢˜**:
1. RSS ä¾èµ–ç¬¬ä¸‰æ–¹ RSSHub æœåŠ¡ï¼Œå¯èƒ½ä¸ç¨³å®š
2. æ— æ³•è·å–æ–°é—»å®Œæ•´å†…å®¹
3. å¢é‡æ£€æµ‹ä¾èµ–çƒ­æ¦œå¹³å°é…ç½®

## 2. æ¶æ„è®¾è®¡

### 2.1 æ–°çˆ¬è™«æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Crawler Manager                              â”‚
â”‚  - 10ç§’è½®è¯¢è°ƒåº¦                                                  â”‚
â”‚  - çˆ¬è™«æ³¨å†Œç®¡ç†                                                  â”‚
â”‚  - ç»Ÿä¸€é”™è¯¯å¤„ç†                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Base Crawler (Abstract)                      â”‚
â”‚  + fetch_news_list() -> List[NewsItem]                         â”‚
â”‚  + fetch_full_content(url) -> str                              â”‚
â”‚  + get_source_id() -> str                                      â”‚
â”‚  + get_source_name() -> str                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ THSCrawler              â”‚     â”‚ FutureCrawler...        â”‚
â”‚ (åŒèŠ±é¡º7x24)            â”‚     â”‚ (é¢„ç•™æ‰©å±•)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   10s   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   å¼‚æ­¥   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çˆ¬è™«ç®¡ç† â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ è·å–æ–°é—»åˆ—è¡¨ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ è·å–å®Œæ•´å†…å®¹ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                       â”‚
                              â–¼                       â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ åŸå§‹æ•°æ®åº“   â”‚        â”‚ æ›´æ–°å†…å®¹å­—æ®µ â”‚
                     â”‚ (è¿‡æ»¤å‰)     â”‚        â”‚              â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ å…³é”®è¯è¿‡æ»¤   â”‚
                     â”‚ æ ‡é¢˜+æ‘˜è¦+   â”‚
                     â”‚ å®Œæ•´å†…å®¹     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                               â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ è¿‡æ»¤åæ•°æ®åº“ â”‚              â”‚ æ¨é€/å±•ç¤º    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æ ¸å¿ƒç±»è®¾è®¡

#### 2.3.1 BaseCrawler (æŠ½è±¡åŸºç±»)

```python
from abc import ABC, abstractmethod
from dataclasses import dataclass
from typing import List, Optional, Dict, Any
from enum import Enum

class FetchStatus(Enum):
    SUCCESS = "success"
    NETWORK_ERROR = "network_error"
    PARSE_ERROR = "parse_error"
    TIMEOUT = "timeout"
    UNKNOWN_ERROR = "unknown_error"

@dataclass
class CrawlerNewsItem:
    """çˆ¬è™«æ–°é—»æ¡ç›®"""
    seq: str                      # å”¯ä¸€åºå·
    title: str                    # æ ‡é¢˜
    summary: str                  # æ‘˜è¦
    full_content: str = ""        # å®Œæ•´å†…å®¹ï¼ˆå¼‚æ­¥å¡«å……ï¼‰
    url: str = ""                 # é“¾æ¥
    published_at: str = ""        # å‘å¸ƒæ—¶é—´
    source: str = ""              # æ¥æº
    extra: Dict[str, Any] = None  # æ‰©å±•å­—æ®µï¼ˆè‚¡ç¥¨ä»£ç ç­‰ï¼‰

    # çŠ¶æ€å­—æ®µ
    content_fetched: bool = False
    content_fetch_error: str = ""

@dataclass
class CrawlResult:
    """çˆ¬å–ç»“æœ"""
    source_id: str
    source_name: str
    items: List[CrawlerNewsItem]
    status: FetchStatus
    error_message: str = ""
    fetch_time: str = ""

class BaseCrawler(ABC):
    """çˆ¬è™«åŸºç±»"""

    @abstractmethod
    def get_source_id(self) -> str:
        """è¿”å›æ•°æ®æºå”¯ä¸€ID"""
        pass

    @abstractmethod
    def get_source_name(self) -> str:
        """è¿”å›æ•°æ®æºæ˜¾ç¤ºåç§°"""
        pass

    @abstractmethod
    def fetch_news_list(self) -> CrawlResult:
        """è·å–æ–°é—»åˆ—è¡¨"""
        pass

    @abstractmethod
    def fetch_full_content(self, item: CrawlerNewsItem) -> tuple[str, FetchStatus]:
        """è·å–å•æ¡æ–°é—»å®Œæ•´å†…å®¹"""
        pass

    def supports_full_content(self) -> bool:
        """æ˜¯å¦æ”¯æŒè·å–å®Œæ•´å†…å®¹"""
        return True
```

#### 2.3.2 CrawlerManager (ç®¡ç†å™¨)

```python
class CrawlerManager:
    """çˆ¬è™«ç®¡ç†å™¨"""

    def __init__(self, config: Dict):
        self.crawlers: Dict[str, BaseCrawler] = {}
        self.config = config
        self.error_log: List[Dict] = []  # é”™è¯¯æ—¥å¿—
        self.poll_interval = config.get("poll_interval", 10)

    def register(self, crawler: BaseCrawler) -> None:
        """æ³¨å†Œçˆ¬è™«"""
        self.crawlers[crawler.get_source_id()] = crawler

    def unregister(self, source_id: str) -> None:
        """æ³¨é”€çˆ¬è™«"""
        self.crawlers.pop(source_id, None)

    def crawl_all(self) -> Dict[str, CrawlResult]:
        """æ‰§è¡Œæ‰€æœ‰å·²æ³¨å†Œçˆ¬è™«"""
        results = {}
        for source_id, crawler in self.crawlers.items():
            try:
                result = crawler.fetch_news_list()
                results[source_id] = result
            except Exception as e:
                self.log_error(source_id, "crawl", str(e))
                results[source_id] = CrawlResult(
                    source_id=source_id,
                    source_name=crawler.get_source_name(),
                    items=[],
                    status=FetchStatus.UNKNOWN_ERROR,
                    error_message=str(e)
                )
        return results

    def log_error(self, source_id: str, operation: str, error: str) -> None:
        """è®°å½•é”™è¯¯æ—¥å¿—"""
        self.error_log.append({
            "time": datetime.now().isoformat(),
            "source_id": source_id,
            "operation": operation,
            "error": error
        })
```

### 2.4 å¼‚å¸¸å¤„ç†æœºåˆ¶

```python
# é”™è¯¯åˆ†ç±»
class CrawlerError(Exception):
    """çˆ¬è™«åŸºç¡€å¼‚å¸¸"""
    pass

class NetworkError(CrawlerError):
    """ç½‘ç»œé”™è¯¯"""
    pass

class ParseError(CrawlerError):
    """è§£æé”™è¯¯"""
    pass

class ContentFetchError(CrawlerError):
    """å†…å®¹è·å–é”™è¯¯"""
    pass

# é”™è¯¯æ—¥å¿—ç»“æ„
error_log_schema = {
    "id": "è‡ªå¢ID",
    "timestamp": "å‘ç”Ÿæ—¶é—´",
    "source_id": "æ•°æ®æºID",
    "operation": "æ“ä½œç±»å‹(fetch_list/fetch_content/parse)",
    "url": "ç›¸å…³URL",
    "error_type": "é”™è¯¯ç±»å‹",
    "error_message": "é”™è¯¯æ¶ˆæ¯",
    "stack_trace": "å †æ ˆè·Ÿè¸ª",
    "resolved": "æ˜¯å¦å·²è§£å†³"
}
```

### 2.5 æ•°æ®åº“è®¾è®¡

#### åŸå§‹æ•°æ®è¡¨ (crawler_raw)

```sql
CREATE TABLE IF NOT EXISTS crawler_raw (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    source_id TEXT NOT NULL,
    source_name TEXT NOT NULL,
    seq TEXT NOT NULL,
    title TEXT NOT NULL,
    summary TEXT,
    full_content TEXT,
    url TEXT,
    published_at TEXT,
    extra_data TEXT,  -- JSON
    crawl_time TEXT NOT NULL,
    first_seen TEXT NOT NULL,
    last_seen TEXT NOT NULL,
    content_fetched INTEGER DEFAULT 0,
    content_fetch_error TEXT,
    UNIQUE(source_id, seq)
);

CREATE INDEX idx_crawler_raw_source ON crawler_raw(source_id);
CREATE INDEX idx_crawler_raw_time ON crawler_raw(crawl_time);
CREATE INDEX idx_crawler_raw_first_seen ON crawler_raw(first_seen);
```

#### è¿‡æ»¤åæ•°æ®è¡¨ (crawler_filtered)

```sql
CREATE TABLE IF NOT EXISTS crawler_filtered (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    raw_id INTEGER NOT NULL,
    source_id TEXT NOT NULL,
    source_name TEXT NOT NULL,
    seq TEXT NOT NULL,
    title TEXT NOT NULL,
    summary TEXT,
    full_content TEXT,
    url TEXT,
    published_at TEXT,
    matched_keywords TEXT,  -- JSON: åŒ¹é…çš„å…³é”®è¯åˆ—è¡¨
    filter_time TEXT NOT NULL,
    pushed INTEGER DEFAULT 0,
    push_time TEXT,
    FOREIGN KEY (raw_id) REFERENCES crawler_raw(id)
);

CREATE INDEX idx_crawler_filtered_source ON crawler_filtered(source_id);
CREATE INDEX idx_crawler_filtered_pushed ON crawler_filtered(pushed);
```

#### é”™è¯¯æ—¥å¿—è¡¨ (crawler_errors)

```sql
CREATE TABLE IF NOT EXISTS crawler_errors (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp TEXT NOT NULL,
    source_id TEXT,
    operation TEXT NOT NULL,
    url TEXT,
    error_type TEXT NOT NULL,
    error_message TEXT,
    stack_trace TEXT,
    resolved INTEGER DEFAULT 0,
    resolve_note TEXT
);

CREATE INDEX idx_crawler_errors_time ON crawler_errors(timestamp);
CREATE INDEX idx_crawler_errors_resolved ON crawler_errors(resolved);
```

## 3. é…ç½®è®¾è®¡

```yaml
# config/config.yaml æ–°å¢é…ç½®æ®µ

# ===============================================================
# è‡ªå®šä¹‰çˆ¬è™«é…ç½®
# ===============================================================
crawler:
  enabled: true
  poll_interval: 10              # è½®è¯¢é—´éš”ï¼ˆç§’ï¼‰

  # å®Œæ•´å†…å®¹è·å–é…ç½®
  full_content:
    enabled: true                # æ˜¯å¦è·å–å®Œæ•´å†…å®¹
    async_mode: true             # å¼‚æ­¥æ¨¡å¼ï¼ˆè·å–åˆ—è¡¨åç«‹å³æ¨é€ï¼Œå†…å®¹å¼‚æ­¥æ›´æ–°ï¼‰
    fetch_delay: 0.3             # è·å–é—´éš”ï¼ˆç§’ï¼‰ï¼Œé¿å…è¯·æ±‚è¿‡å¿«
    timeout: 10                  # å•æ¬¡è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
    retry_count: 2               # å¤±è´¥é‡è¯•æ¬¡æ•°

  # æ•°æ®æºé…ç½®
  sources:
    - id: "ths-realtime"
      name: "åŒèŠ±é¡º7x24"
      enabled: true
      type: "ths"                # çˆ¬è™«ç±»å‹

  # æ•°æ®ä¿ç•™é…ç½®
  storage:
    max_items: 10000             # æœ€å¤§æ¡ç›®æ•°
    max_days: 30                 # æœ€å¤§ä¿ç•™å¤©æ•°

  # é”™è¯¯æ—¥å¿—
  error_log:
    enabled: true
    max_entries: 1000            # æœ€å¤§æ—¥å¿—æ¡ç›®
```

## 4. è¿‡æ»¤æœºåˆ¶å¢å¼º

### 4.1 ä¸‰å±‚è¿‡æ»¤

```python
def filter_news_item(
    item: CrawlerNewsItem,
    word_groups: List[Dict],
    filter_words: List[str],
    global_filters: List[str]
) -> tuple[bool, List[str]]:
    """
    ä¸‰å±‚è¿‡æ»¤ï¼šæ ‡é¢˜ -> æ‘˜è¦ -> å®Œæ•´å†…å®¹

    Returns:
        (æ˜¯å¦é€šè¿‡, åŒ¹é…çš„å…³é”®è¯åˆ—è¡¨)
    """
    matched_keywords = []

    # æ£€æŸ¥å…¨å±€è¿‡æ»¤è¯ï¼ˆä»»ä¸€å†…å®¹åŒ¹é…åˆ™æ’é™¤ï¼‰
    all_content = f"{item.title} {item.summary} {item.full_content}"
    for filter_word in global_filters:
        if filter_word.lower() in all_content.lower():
            return False, []

    # ä¸‰å±‚å…³é”®è¯åŒ¹é…
    texts_to_check = [
        item.title,
        item.summary,
        item.full_content
    ]

    for text in texts_to_check:
        if not text:
            continue
        for group in word_groups:
            if matches_word_group(text, group, filter_words):
                keyword = group.get("display_name") or group.get("words", [""])[0]
                if keyword not in matched_keywords:
                    matched_keywords.append(keyword)

    return len(matched_keywords) > 0, matched_keywords
```

## 5. ç½‘é¡µå±•ç¤ºæ”¹é€ 

### 5.1 æ˜¾ç¤ºéœ€æ±‚

1. **æœ€å¤§å†å²100æ¡**: æ»šåŠ¨ç¼“å†²åŒº
2. **å¢é‡æ ‡è®°**: æ¯10ç§’æ˜¾ç¤ºæ–°å¢æ¡ç›®
3. **è¿‡æ»¤çŠ¶æ€**: æ˜¾ç¤ºæ˜¯å¦è¢«è¿‡æ»¤åŠåŸå› 
4. **å®Œæ•´å†…å®¹**: å¯å±•å¼€æŸ¥çœ‹

### 5.2 HTML æ¨¡æ¿å˜æ›´

```html
<!-- æ–°å¢æ¡ç›®æ ‡è®° -->
<div class="news-item {{ 'new-item' if is_new else '' }} {{ 'filtered-out' if filtered else '' }}">
    <span class="time">{{ published_at }}</span>
    <span class="title">{{ title }}</span>
    {% if filtered %}
    <span class="filter-tag" title="è¢«è¿‡æ»¤">ğŸš«</span>
    {% else %}
    <span class="matched-tag" title="{{ matched_keywords|join(', ') }}">âœ“</span>
    {% endif %}
    <button class="expand-btn" onclick="toggleContent(this)">å±•å¼€</button>
    <div class="full-content hidden">{{ full_content }}</div>
</div>
```

## 6. AI åˆ†ææ¥å£é¢„ç•™

```python
@dataclass
class AIAnalysisRequest:
    """AIåˆ†æè¯·æ±‚"""
    item_id: int
    title: str
    summary: str
    full_content: str
    prompt_template: str = ""

@dataclass
class AIAnalysisResult:
    """AIåˆ†æç»“æœ"""
    item_id: int
    analysis: str = ""
    keywords_extracted: List[str] = None
    sentiment: str = ""  # positive/negative/neutral
    importance: int = 0  # 1-10
    error: str = ""

class AIAnalyzer:
    """AIåˆ†æå™¨ï¼ˆé¢„ç•™æ¥å£ï¼‰"""

    async def analyze(self, request: AIAnalysisRequest) -> AIAnalysisResult:
        """å¼‚æ­¥åˆ†æå•æ¡æ–°é—»"""
        # TODO: å®ç°AIåˆ†æé€»è¾‘
        pass

    async def batch_analyze(self, requests: List[AIAnalysisRequest]) -> List[AIAnalysisResult]:
        """æ‰¹é‡åˆ†æ"""
        pass
```

## 7. å®ç°è®¡åˆ’

### Phase 1: æ ¸å¿ƒçˆ¬è™«æ¨¡å— âœ…
- [x] åˆ›å»ºè®¾è®¡æ–‡æ¡£
- [x] å®ç° BaseCrawler æŠ½è±¡ç±»
- [x] å®ç° THSCrawler (åŒèŠ±é¡º)
- [x] å®ç° CrawlerManager

### Phase 2: å­˜å‚¨ä¸å¼‚å¸¸å¤„ç† âœ…
- [x] å®ç°æ•°æ®åº“ schema
- [x] å®ç°é”™è¯¯æ—¥å¿—æœºåˆ¶
- [x] å®ç°æ•°æ®æ¸…ç†æœºåˆ¶

### Phase 3: é›†æˆä¸è¿‡æ»¤ âœ…
- [x] é›†æˆåˆ° TrendRadar ä¸»æµç¨‹
- [x] å®ç°ä¸‰å±‚è¿‡æ»¤
- [x] ä¿®å¤å¢é‡æœºåˆ¶ bug

### Phase 4: å±•ç¤ºä¸æµ‹è¯• âœ…
- [x] æ”¹é€ ç½‘é¡µæ˜¾ç¤ºï¼ˆHTMLæŠ¥å‘Šï¼‰
- [x] ç¼–å†™æµ‹è¯•è„šæœ¬
- [x] ç«¯åˆ°ç«¯æµ‹è¯•

### Phase 5: æ–‡æ¡£ä¸å‘å¸ƒ âœ…
- [x] æ›´æ–°éƒ¨ç½²æ–‡æ¡£
- [x] æ›´æ–°æ¶æ„å›¾
- [x] ä»£ç æäº¤

## 8. å®ç°æ–‡ä»¶æ¸…å•

### 8.1 æ ¸å¿ƒæ¨¡å—

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `trendradar/crawler/custom/__init__.py` | æ¨¡å—å…¥å£ï¼Œå¯¼å‡ºæ‰€æœ‰å…¬å…±ç±»å’Œå‡½æ•° |
| `trendradar/crawler/custom/base.py` | åŸºç¡€ç±»ï¼šBaseCrawler, CrawlerNewsItem, CrawlResult, FetchStatus |
| `trendradar/crawler/custom/ths.py` | åŒèŠ±é¡º7x24çˆ¬è™«å®ç° |
| `trendradar/crawler/custom/manager.py` | çˆ¬è™«ç®¡ç†å™¨ï¼Œæ”¯æŒæ³¨å†Œã€è°ƒåº¦ã€å­˜å‚¨ |
| `trendradar/crawler/custom/filter.py` | ä¸‰å±‚è¿‡æ»¤æ¨¡å— |
| `trendradar/crawler/runner.py` | çˆ¬è™«è¿è¡Œå™¨ï¼Œé›†æˆåˆ°ä¸»æµç¨‹ |

### 8.2 è„šæœ¬æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `scripts/run_crawler.py` | ç‹¬ç«‹çˆ¬è™«è¿è¡Œè„šæœ¬ï¼Œæ”¯æŒ HTML æŠ¥å‘Šç”Ÿæˆ |
| `scripts/test_crawler.py` | çˆ¬è™«æ¨¡å—æµ‹è¯•è„šæœ¬ |

### 8.3 é…ç½®æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | å˜æ›´ |
|---------|------|
| `config/config.yaml` | æ–°å¢ `crawler_custom` é…ç½®æ®µ |
| `trendradar/core/loader.py` | æ–°å¢ `_load_crawler_custom_config` å‡½æ•° |

### 8.4 ä½¿ç”¨æ–¹å¼

```bash
# æµ‹è¯•çˆ¬è™«æ¨¡å—
python3 scripts/test_crawler.py

# è¿è¡Œçˆ¬è™«ï¼ˆæŒç»­æ¨¡å¼ï¼‰
python3 scripts/run_crawler.py

# è¿è¡Œçˆ¬è™«ï¼ˆå•æ¬¡æ¨¡å¼ï¼‰
python3 scripts/run_crawler.py --once

# æŒ‡å®šè¿è¡Œæ—¶é•¿ï¼ˆç§’ï¼‰
python3 scripts/run_crawler.py -d 300

# è‡ªå®šä¹‰è½®è¯¢é—´éš”
python3 scripts/run_crawler.py -i 5
```

## 9. é£é™©ä¸ç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
| ç½‘ç«™åçˆ¬ | æ— æ³•è·å–æ•°æ® | åˆç†è¯·æ±‚é—´éš”ã€UAä¼ªè£… |
| é¡µé¢ç»“æ„å˜åŒ– | è§£æå¤±è´¥ | å¤šç§é€‰æ‹©å™¨å¤‡é€‰ã€é”™è¯¯å‘Šè­¦ |
| ç½‘ç»œæ³¢åŠ¨ | æ•°æ®ä¸å®Œæ•´ | é‡è¯•æœºåˆ¶ã€æœ¬åœ°ç¼“å­˜ |
| AIå“åº”æ…¢ | æ¨é€å»¶è¿Ÿ | å¼‚æ­¥å¤„ç†ã€è¶…æ—¶è·³è¿‡ |

## 10. å®Œæ•´æ¶æ„å›¾

### 10.1 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            TrendRadar ç³»ç»Ÿæ¶æ„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   çƒ­æ¦œå¹³å°   â”‚   â”‚  RSS è®¢é˜…   â”‚   â”‚ è‡ªå®šä¹‰çˆ¬è™«  â”‚  â† æ•°æ®æºå±‚           â”‚
â”‚  â”‚  (å¯é€‰)     â”‚   â”‚  (å¯é€‰)     â”‚   â”‚  (åŒèŠ±é¡º)   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚         â”‚                 â”‚                 â”‚                               â”‚
â”‚         â–¼                 â–¼                 â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    NewsAnalyzer.run()                            â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚       â”‚
â”‚  â”‚  â”‚_crawl_data()â”‚ â”‚_crawl_rss() â”‚ â”‚ _crawl_custom_data()    â”‚    â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                               â”‚
â”‚                             â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                  _execute_mode_strategy()                        â”‚       â”‚
â”‚  â”‚                                                                   â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚       â”‚
â”‚  â”‚  â”‚   daily     â”‚ â”‚ incremental â”‚ â”‚   current   â”‚                â”‚       â”‚
â”‚  â”‚  â”‚  å…¨å¤©æ±‡æ€»   â”‚ â”‚  å¢é‡åˆ†æ   â”‚ â”‚  å½“å‰æ¦œå•   â”‚                â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚         â–¼                   â–¼                   â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ HTML æŠ¥å‘Š   â”‚     â”‚  é‚®ä»¶æ¨é€   â”‚     â”‚ å…¶ä»–é€šçŸ¥    â”‚  â† è¾“å‡ºå±‚         â”‚
â”‚  â”‚ (Webå±•ç¤º)   â”‚     â”‚ (163â†’QQ)   â”‚     â”‚(é£ä¹¦/é’‰é’‰)  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 è‡ªå®šä¹‰çˆ¬è™«æ•°æ®æµï¼ˆè¯¦ç»†ï¼‰

```
[é…ç½®åŠ è½½]
    â”‚
    â”œâ”€â”€ config/config.yaml
    â”‚       â””â”€â”€ crawler_custom.enabled: true
    â”‚
    â””â”€â”€ config/frequency_words.txt
            â””â”€â”€ [åœ°ç¼˜æ”¿æ²»/èƒ½æº] çŸ³æ²¹, ä¼Šæœ—, ç¾å›½
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CrawlerRunner.crawl_once()                   â”‚
â”‚                                                                   â”‚
â”‚  1. CrawlerManager.crawl()                                       â”‚
â”‚     â”‚                                                             â”‚
â”‚     â””â”€â”€ THSCrawler.fetch_news_list()                             â”‚
â”‚             â”‚                                                     â”‚
â”‚             â”œâ”€â”€ GET http://stock.10jqka.com.cn/.../realtimenews.js
â”‚             â”œâ”€â”€ è§£æ JSONP (GBK â†’ UTF-8)                         â”‚
â”‚             â””â”€â”€ è¿”å› 100 æ¡ CrawlerNewsItem                      â”‚
â”‚                              â”‚                                   â”‚
â”‚  2. _detect_new_items()     â—„â”˜                                   â”‚
â”‚     â”‚                                                             â”‚
â”‚     â””â”€â”€ åŸºäº seq æ£€æµ‹æ–°å¢ â†’ 4 æ¡æ–°å¢                             â”‚
â”‚                              â”‚                                   â”‚
â”‚  3. fetch_full_content()    â—„â”˜ (å¼‚æ­¥)                            â”‚
â”‚     â”‚                                                             â”‚
â”‚     â””â”€â”€ è·å–è¯¦æƒ…é¡µå†…å®¹å¡«å…… full_content å­—æ®µ                     â”‚
â”‚                              â”‚                                   â”‚
â”‚  4. filter_news_items()     â—„â”˜                                   â”‚
â”‚     â”‚                                                             â”‚
â”‚     â”œâ”€â”€ ç¬¬ä¸€å±‚ï¼šæ ‡é¢˜åŒ¹é…                                         â”‚
â”‚     â”œâ”€â”€ ç¬¬äºŒå±‚ï¼šæ‘˜è¦åŒ¹é…                                         â”‚
â”‚     â””â”€â”€ ç¬¬ä¸‰å±‚ï¼šå®Œæ•´å†…å®¹åŒ¹é…                                     â”‚
â”‚             â”‚                                                     â”‚
â”‚             â”œâ”€â”€ é€šè¿‡ 21 æ¡ â†’ filter_tag = "âœ“ åœ°ç¼˜æ”¿æ²»/èƒ½æº"      â”‚
â”‚             â””â”€â”€ è¿‡æ»¤ 79 æ¡ â†’ filter_tag = "ğŸš« æ— åŒ¹é…å…³é”®è¯"      â”‚
â”‚                              â”‚                                   â”‚
â”‚  5. StorageManager.save()   â—„â”˜                                   â”‚
â”‚     â”‚                                                             â”‚
â”‚     â””â”€â”€ ä¿å­˜åˆ° output/news/crawler.db                            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                _process_custom_data_by_mode()                    â”‚
â”‚                                                                   â”‚
â”‚  incremental æ¨¡å¼:                                               â”‚
â”‚  â””â”€â”€ åªå¤„ç† new_count > 0 çš„æ–°å¢æ¡ç›®                             â”‚
â”‚                              â”‚                                   â”‚
â”‚  convert_to_rss_format()    â—„â”˜                                   â”‚
â”‚  â””â”€â”€ è½¬æ¢ä¸º RSS å…¼å®¹æ ¼å¼ï¼Œä¿ç•™ filter_tag                        â”‚
â”‚                              â”‚                                   â”‚
â”‚  count_rss_frequency()      â—„â”˜                                   â”‚
â”‚  â””â”€â”€ word_groups=[] (è·³è¿‡äºŒæ¬¡è¿‡æ»¤)                               â”‚
â”‚                              â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     render_html_content()                        â”‚
â”‚                                                                   â”‚
â”‚  render_rss_stats_html()                                         â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ æ£€æµ‹ filter_tag â†’ æ ‡é¢˜æ”¹ä¸º "è‡ªå®šä¹‰çˆ¬è™«"                     â”‚
â”‚  â”œâ”€â”€ ä½¿ç”¨ feed_name â†’ åˆ†ç»„å "åŒèŠ±é¡ºå¿«è®¯"                        â”‚
â”‚  â””â”€â”€ æ˜¾ç¤ºè¿‡æ»¤æ ‡ç­¾ (âœ“/ğŸš«)                                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NotificationDispatcher                          â”‚
â”‚                                                                   â”‚
â”‚  dispatch_all()                                                   â”‚
â”‚  â”‚                                                               â”‚
â”‚  â”œâ”€â”€ EmailNotification.send() â”€â”€â”€â”€â”€â”€â”€â”€â–º wutfisher@outlook.com   â”‚
â”‚  â”œâ”€â”€ FeishuNotification.send() â”€â”€â”€â”€â”€â”€â”€â–º (å¯é€‰)                   â”‚
â”‚  â””â”€â”€ ...                                                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 å…³é”®ä»£ç è·¯å¾„

```
trendradar/__main__.py
â”œâ”€â”€ NewsAnalyzer.run()                    # ä¸»å…¥å£
â”‚   â”œâ”€â”€ _crawl_custom_data()              # è°ƒç”¨è‡ªå®šä¹‰çˆ¬è™«
â”‚   â”‚   â””â”€â”€ CrawlerRunner.crawl_once()    # æ‰§è¡Œçˆ¬å–
â”‚   â”‚       â”œâ”€â”€ manager.crawl()           # ç®¡ç†å™¨è°ƒåº¦
â”‚   â”‚       â”œâ”€â”€ filter_news_items()       # ä¸‰å±‚è¿‡æ»¤
â”‚   â”‚       â””â”€â”€ storage.save()            # å­˜å‚¨
â”‚   â”‚
â”‚   â””â”€â”€ _execute_mode_strategy()          # æ‰§è¡Œæ¨¡å¼ç­–ç•¥
â”‚       â””â”€â”€ _process_custom_data_by_mode()# å¤„ç†è‡ªå®šä¹‰æ•°æ®
â”‚           â””â”€â”€ count_rss_frequency()     # ç»Ÿè®¡ï¼ˆè·³è¿‡è¿‡æ»¤ï¼‰

trendradar/report/html.py
â””â”€â”€ render_html_content()                 # æ¸²æŸ“ HTML
    â””â”€â”€ render_rss_stats_html()           # RSS/è‡ªå®šä¹‰çˆ¬è™«åŒºå—
        â”œâ”€â”€ æ£€æµ‹ filter_tag               # è‡ªåŠ¨è¯†åˆ«æ•°æ®ç±»å‹
        â””â”€â”€ æ¸²æŸ“è¿‡æ»¤æ ‡ç­¾                  # âœ“/ğŸš« æ˜¾ç¤º

trendradar/notification/dispatcher.py
â””â”€â”€ dispatch_all()                        # æ¨é€åˆ†å‘
    â””â”€â”€ EmailNotification.send()          # é‚®ä»¶å‘é€
```

## 11. åç»­æ‰©å±•

1. **æ›´å¤šæ•°æ®æº**: è´¢è”ç¤¾ã€æ–°æµªè´¢ç»ç­‰
2. **MCPé›†æˆ**: æ”¯æŒAIåŠ©æ‰‹æŸ¥è¯¢
3. **å‘Šè­¦é€šçŸ¥**: å¼‚å¸¸æƒ…å†µå¾®ä¿¡/é‚®ä»¶å‘Šè­¦
4. **æ•°æ®åˆ†æ**: å†å²è¶‹åŠ¿ã€çƒ­ç‚¹è¿½è¸ª
